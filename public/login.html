<!DOCTYPE html>
<html lang="en">
<link rel="icon" href="favicon.png">
<title>Fix it Feliks</title>

<head>
  <link rel="stylesheet" type="text/css" href="https://www.w3schools.com/w3css/4/w3.css">

</head>

<body>
<div class="w3-row">
    <div class="w3-col" style="width:28%;height:10px;">
      <div></div>
    </div>
    <div class="w3-col" style="width:44%;height:100%;">
	  <div style="w3-display-topmiddle;text-align:center;font-size:20px;font-family:calibri;">
		<img src="omw.png">
    <br>
    <div class="w3-container w3-margin-top">
      <form class="w3-container w3-card-4" method="post" id='loginform'>
        <p>
        <input class="w3-input" type="text" style="width:100%" name="email" required>
        <label class="w3-label w3-validate">Email</label></p>
        <p>
        <input class="w3-input" type="password" style="width:100%" name="password" required>
        <label class="w3-label w3-validate">Password</label></p>
        <p>

        <input type="hidden" name="redirect">
        <input type="hidden" name="client_id">
        <input type="hidden" name="redirect_uri">
        <input type="hidden" name="state" />

        <button class="w3-btn w3-section w3-black w3-ripple" onclick="formSubmit()"> Log in </button></p>
      </form>
    </div>
    <div class="w3-col" style="width:28%;height:10px;">
	    <div style="w3-display-topmiddle;text-align:left;font-size:20px;font-family:calibri;padding-top:210px;">

		</div>
	</div>
</div>

<script type="text/javascript">
    function getUrlParameters () {
        // Get each parameter
        let query = window.location.search.substr(1);
        // Split each parameter into a key-value pair
        let keyValues = query.split('&');
        let parameterMap = new Map();
        for (let i in keyValues) {
            // Split into <key>=<value>
            let param = keyValues[i];
            let splitParam = param.split('=');
            parameterMap.set(splitParam[0], splitParam[1]);
        }
        return parameterMap;
    }

    function formSubmit () {
        // Get URL parameters
        let params = getUrlParameters();
        // Set each hidden input from a value obtained from the URL
        document.querySelector('[name="redirect_uri"]').value = params.get('redirect_uri');
        document.querySelector('[name="client_id"]').value = params.get('client_id');
        document.querySelector('[name="redirect_uri"]').value = params.get('redirect_uri');
        document.querySelector('[name="state"]').value = params.get('state');
        document.querySelector('#loginform').submit();
    }
</script>

</body>

</html>
